# 快速启动指南

## 开发环境要求

- Python 3.8+
- Node.js 16+
- Chrome浏览器（用于安装插件）

## 一键启动（开发环境）

### 1. 后端启动

```bash
# 进入后端目录
cd backend

# 创建虚拟环境（推荐）
python -m venv venv

# 激活虚拟环境
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# 安装依赖
pip install -r requirements.txt

# 初始化数据库（自动创建SQLite文件）
flask db init
flask db migrate -m "Initial migration"
flask db upgrade

# 创建管理员账户
python init_db.py

# 启动后端服务
python run.py
```

后端服务运行在: http://localhost:5000

### 2. 前端启动

```bash
# 新开一个终端，进入前端目录
cd frontend

# 安装依赖
npm install

# 启动前端服务
npm run dev
```

前端服务运行在: http://localhost:5173

### 3. 登录系统

打开浏览器访问: http://localhost:5173

默认管理员账户:
- 邮箱: admin@example.com
- 密码: admin123

**重要**: 首次登录后请立即修改密码！

### 4. 安装Chrome插件（可选）

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 启用"开发者模式"（右上角开关）
4. 点击"加载已解压的扩展程序"
5. 选择 `client/chrome-extension` 文件夹
6. 点击插件图标 → 设置
7. 填写:
   - 服务器地址: http://localhost:5000
   - 用户编号: UM001

## 数据库说明

### 开发环境（默认）
- 使用SQLite3数据库
- 数据库文件: `backend/taskmanager.db`
- 无需安装数据库服务器
- 适合开发和测试

### 生产环境（推荐）
- 建议使用PostgreSQL
- 需要修改环境变量 `DATABASE_URL`
- 参考主README的生产部署章节

## 常见问题

### Q: 遇到numpy兼容性错误怎么办？
```
ValueError: numpy.dtype size changed, may indicate binary incompatibility
```

**解决方案**：运行修复脚本

Windows:
```bash
# 双击运行
修复numpy问题.bat

# 或在命令行执行
.\修复numpy问题.bat
```

Linux/Mac:
```bash
chmod +x 修复numpy问题.sh
./修复numpy问题.sh
```

或者手动执行：
```bash
cd backend
pip uninstall numpy pandas -y
pip install -r requirements.txt
```

详细说明请查看：`问题已修复-numpy兼容性.md`

### Q: 如何停止服务？
A: 在运行的终端按 `Ctrl+C`

### Q: 如何重置数据库？
A: 删除 `backend/taskmanager.db` 和 `backend/migrations` 目录，然后重新运行初始化命令

### Q: 端口被占用怎么办？
A: 修改 `backend/run.py` 中的端口号，或者修改 `frontend/vite.config.js` 中的端口配置

### Q: 虚拟环境激活失败？
A: Windows PowerShell可能需要设置执行策略: `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser`

## 开发流程

1. **后端开发**: 修改 `backend/app/` 下的代码
   - 模型: `app/models/`
   - 服务: `app/services/`
   - API: `app/api/`

2. **前端开发**: 修改 `frontend/src/` 下的代码
   - 页面: `src/views/`
   - 组件: `src/components/`
   - API: `src/api/`

3. **热重载**: 保存文件后自动刷新
   - 后端: Flask会自动重启
   - 前端: Vite会自动刷新浏览器

## 下一步

- 查看完整文档: `docs/` 目录
- 查看产品需求: `任务分发工具.md`
- 查看架构设计: `docs/整体架构设计.md`
